# Reviews Django

A simple REST API application for submitting and retrieving user reviews powered by *Django*. It uses [*Django REST Framework*](http://www.django-rest-framework.org).

## Installation

Install *PostgreSQL* and *Git*:

```
# On MacOS
$ brew install postgresql git

# On Debian GNU/Linux
$ sudo apt install postgresql git
```

Install `virtualenv` or `virtualenvwrapper`:

```
# Install virtualenv
$ sudo pip install virtualenv

# Or virtualenvwrapper
$ sudo pip install virtualenvwrapper
```

Clone this repository:

```
$ git clone https://github.com/rukbotto/reviews-django ~/reviews-django
```

Create a virtualenv for installing all dependencies:

```
# Using virtualenv
$ virtualenv ~/.virtualenvs/reviews-django --python=python3

# Or using virtualenvwrapper
$ mkvirtualenv reviews-django --python=python3
```

Activate the newly created virtualenv:

```
# Using virtualenv
$ source ~/.virtualenvs/reviews-django/bin/activate

# Or using virtualenvwrapper
$ workon reviews-django
```

Install all dependencies:

```
(reviews-django) $ cd ~/reviews-django
(reviews-django) $ pip install -r requirements.txt
```

## Database configuration

Create a new PostgreSQL role:

```
(reviews-django) $ psql postgres
postgres=# CREATE ROLE reviews_django WITH LOGIN PASSWORD 'strong_password_here';
postgres=# ALTER ROLE reviews_django CREATEDB;
postgres=# \q
```

Then create the database using the recently created user:

```
(reviews-django) $ psql postgres -U reviews_django
postgres=> CREATE DATABASE reviews_django;
```

Finally grant permissions:

```
postgres=> GRANT ALL PRIVILEGES ON DATABASE reviews_django TO reviews_django;
postgres=> \q
```

## Django configuration

Create a local configuration file:

```
(reviews-django) $ touch reviews_django/local_settings.py
```

And add the following lines of code in order to configure local development settings:

```python
SECRET_KEY='secret_key_here'

DEBUG = True

ALLOWED_HOSTS = []

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'reviews_django',
        'USER': 'reviews_django',
        'PASSWORD': 'strong_password_here',
        'HOST': '127.0.0.1',
        'PORT': '5432',
    }
}
```

The secret key can be generated by *Django* using the interactive *Python* shell:

```
(reviews-django) $ python
Python 3.7.0 (default, Jun 29 2018, 20:13:13)
>>> from django.core.management.utils import get_random_secret_key
>>> get_random_secret_key()
>>> '3z^w%y!...'
```

Copy the generated secret key and paste it into the `SECRET_KEY` setting in the local configuration file.

## Usage

Run database migrations:

```
(reviews-django) $ python manage.py migrate
```

Finally run the local development server:

```
(reviews-django) $ python manage.py runserver
```
